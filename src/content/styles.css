/* Wrapper for textarea/input elements */
.spelling-tab-wrapper {
  position: relative !important;
  display: inline-block !important;
}

/* Mirror overlay for textarea/input */
.spelling-tab-overlay {
  position: absolute !important;
  top: 0 !important;
  left: 0 !important;
  pointer-events: none !important;
  color: transparent !important;
  background: transparent !important;
  overflow: hidden !important;
  z-index: 10000 !important;
  border-color: transparent !important;
  margin: 0 !important;
  white-space: pre-wrap !important;
  word-wrap: break-word !important;
}

/* Spelling error — red wavy underline (for textarea overlay marks) */
.spelling-tab-error-spelling {
  background: transparent !important;
  color: transparent !important;
  text-decoration: underline wavy #e74c3c !important;
  text-decoration-skip-ink: none !important;
  text-underline-offset: 2px !important;
  pointer-events: auto !important;
  cursor: pointer !important;
  border-radius: 0 !important;
}

/* Grammar error — blue wavy underline (for textarea overlay marks) */
.spelling-tab-error-grammar {
  background: transparent !important;
  color: transparent !important;
  text-decoration: underline wavy #3498db !important;
  text-decoration-skip-ink: none !important;
  text-underline-offset: 2px !important;
  pointer-events: auto !important;
  cursor: pointer !important;
  border-radius: 0 !important;
}

/* Style/enhancement — amber wavy underline (for textarea overlay marks) */
.spelling-tab-error-style {
  background: transparent !important;
  color: transparent !important;
  text-decoration: underline wavy #f59e0b !important;
  text-decoration-skip-ink: none !important;
  text-underline-offset: 2px !important;
  pointer-events: auto !important;
  cursor: pointer !important;
  border-radius: 0 !important;
}

/* ContentEditable overlay container */
.spelling-tab-ce-container {
  position: absolute !important;
  pointer-events: none !important;
  top: 0 !important;
  left: 0 !important;
  width: 100% !important;
  height: 100% !important;
  overflow: hidden !important;
  z-index: 10000 !important;
}

/* Spelling underline for contenteditable (positioned div) */
.spelling-tab-underline-spelling {
  position: absolute !important;
  height: 2px !important;
  background: linear-gradient(45deg, transparent 25%, #e74c3c 25%, #e74c3c 50%, transparent 50%, transparent 75%, #e74c3c 75%) !important;
  background-size: 4px 2px !important;
  pointer-events: auto !important;
  cursor: pointer !important;
}

/* Grammar underline for contenteditable (positioned div) */
.spelling-tab-underline-grammar {
  position: absolute !important;
  height: 2px !important;
  background: linear-gradient(45deg, transparent 25%, #3498db 25%, #3498db 50%, transparent 50%, transparent 75%, #3498db 75%) !important;
  background-size: 4px 2px !important;
  pointer-events: auto !important;
  cursor: pointer !important;
}

/* Style/enhancement underline for contenteditable (positioned div) */
.spelling-tab-underline-style {
  position: absolute !important;
  height: 2px !important;
  background: linear-gradient(45deg, transparent 25%, #f59e0b 25%, #f59e0b 50%, transparent 50%, transparent 75%, #f59e0b 75%) !important;
  background-size: 4px 2px !important;
  pointer-events: auto !important;
  cursor: pointer !important;
}

/* Suggestion popup */
.spelling-tab-popup {
  position: fixed !important;
  background: #fff !important;
  border: 1px solid #ddd !important;
  border-radius: 8px !important;
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.12) !important;
  padding: 0 !important;
  min-width: 200px !important;
  max-width: 420px !important;
  z-index: 100001 !important;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif !important;
  font-size: 13px !important;
  overflow: hidden !important;
}

.spelling-tab-popup-category {
  padding: 6px 14px 0 !important;
  font-size: 9px !important;
  font-weight: 700 !important;
  text-transform: uppercase !important;
  letter-spacing: 0.5px !important;
}

.spelling-tab-popup-cat-spelling {
  color: #dc2626 !important;
}

.spelling-tab-popup-cat-grammar {
  color: #2563eb !important;
}

.spelling-tab-popup-cat-style {
  color: #d97706 !important;
}

.spelling-tab-popup-message {
  padding: 10px 14px 6px !important;
  color: #555 !important;
  font-size: 12px !important;
  line-height: 1.4 !important;
}

.spelling-tab-popup-problem {
  padding: 0 14px 8px !important;
  color: #999 !important;
  font-size: 11px !important;
  font-style: italic !important;
  border-bottom: 1px solid #f0f0f0 !important;
}

.spelling-tab-popup-suggestion {
  display: block !important;
  width: 100% !important;
  padding: 8px 14px !important;
  border: none !important;
  background: none !important;
  text-align: left !important;
  cursor: pointer !important;
  color: #2563eb !important;
  font-size: 14px !important;
  font-weight: 500 !important;
  font-family: inherit !important;
  line-height: 1.4 !important;
  word-wrap: break-word !important;
  overflow-wrap: break-word !important;
}

.spelling-tab-popup-suggestion:hover {
  background-color: #eff6ff !important;
}

.spelling-tab-popup-suggestion:last-child {
  border-radius: 0 0 8px 8px !important;
}

.spelling-tab-popup-no-suggestion {
  padding: 8px 14px !important;
  color: #999 !important;
  font-style: italic !important;
  font-size: 12px !important;
}

/* "Tab to fix" hint — appears near first error underline */
/* NOTE: display is controlled purely via inline styles with !important */
.spelling-tab-hint {
  position: fixed !important;
  align-items: center !important;
  gap: 3px !important;
  padding: 2px 6px !important;
  background: rgba(0, 0, 0, 0.75) !important;
  color: #fff !important;
  border-radius: 4px !important;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif !important;
  font-size: 11px !important;
  font-weight: 500 !important;
  z-index: 100002 !important;
  pointer-events: none !important;
  user-select: none !important;
  line-height: 1.2 !important;
  white-space: nowrap !important;
  opacity: 0.85 !important;
  box-shadow: 0 1px 4px rgba(0, 0, 0, 0.2) !important;
}

.spelling-tab-hint-key {
  display: inline-block !important;
  padding: 1px 4px !important;
  background: rgba(255, 255, 255, 0.2) !important;
  border-radius: 3px !important;
  font-size: 10px !important;
  font-weight: 700 !important;
  letter-spacing: 0.3px !important;
  border: 1px solid rgba(255, 255, 255, 0.3) !important;
}

.spelling-tab-hint-text {
  font-size: 10px !important;
  font-weight: 400 !important;
  opacity: 0.9 !important;
}

/* AI toolbar — floating row of buttons on text selection */
.spelling-tab-ai-toolbar {
  position: absolute !important;
  z-index: 100003 !important;
  display: flex !important;
  gap: 0 !important;
  background: #fff !important;
  border: 1px solid #e0d4f5 !important;
  border-radius: 8px !important;
  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.14) !important;
  overflow: hidden !important;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif !important;
}

.spelling-tab-ai-toolbar .spelling-tab-ai-btn {
  padding: 5px 10px !important;
  font-size: 11px !important;
  font-weight: 500 !important;
  color: #5b21b6 !important;
  background: #fff !important;
  border: none !important;
  border-right: 1px solid #f0e8fc !important;
  border-radius: 0 !important;
  cursor: pointer !important;
  white-space: nowrap !important;
  transition: background 0.15s !important;
  line-height: 1.3 !important;
}

.spelling-tab-ai-toolbar .spelling-tab-ai-btn:last-child {
  border-right: none !important;
}

.spelling-tab-ai-toolbar .spelling-tab-ai-btn:hover {
  background: #f5f0ff !important;
}

.spelling-tab-ai-toolbar .spelling-tab-ai-btn:disabled {
  opacity: 0.6 !important;
  cursor: wait !important;
  color: #888 !important;
}

.spelling-tab-ai-btn.spelling-tab-ai-loading::before {
  content: '' !important;
  display: inline-block !important;
  width: 10px !important;
  height: 10px !important;
  border: 2px solid #c4b5fd !important;
  border-top-color: #6d28d9 !important;
  border-radius: 50% !important;
  margin-right: 5px !important;
  vertical-align: middle !important;
  animation: spelling-tab-spin 0.6s linear infinite !important;
}

@keyframes spelling-tab-spin {
  to { transform: rotate(360deg); }
}
